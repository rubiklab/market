<?php

namespace App\Models;

use Spatie\Image\Manipulations;
use Illuminate\Database\Eloquent\SoftDeletes;
use Illuminate\Database\Eloquent\Concerns\HasUuids;
use Illuminate\Database\Eloquent\Factories\HasFactory;
use Illuminate\Database\Eloquent\Model;
use Spatie\MediaLibrary\HasMedia;
use Spatie\MediaLibrary\InteractsWithMedia;
use Spatie\MediaLibrary\MediaCollections\Models\Media;
use Illuminate\Database\Eloquent\Builder;
use Illuminate\Database\Eloquent\Relations\HasManyThrough;

class Item extends Model implements HasMedia
{
    use HasFactory, SoftDeletes, InteractsWithMedia, HasUuids;

    protected $primaryKey = 'uuid';
    public $incrementing = false;
    protected $keyType = 'string';

    public $appends = ['thumbImage', 'images'];

    public function scopeAvailable(Builder $query): void
    {
        $query->whereNotNull('published_at')->whereNull('sold_at');
    }

    public function registerMediaConversions(Media $media = null): void
    {
        $this->addMediaConversion('thumb')
            //->fit(Manipulations::FIT_CROP, 300, 300)
            ->width(300)
            ->height(300)
            ->nonQueued();

        $this->addMediaConversion('slider')
            //->fit(Manipulations::FIT_CROP, 1200, 800)
            ->width(1200)
            ->height(800)
            ->nonQueued();
    }

    public function registerMediaCollections(): void
    {
        $this
            ->addMediaCollection('images')
            ->useFallbackUrl('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlgAAAGQCAYAAAByNR6YAAAAAXNSR0IArs4c6QAAIABJREFUeF7t3Qm0XXV9L/B/QuYRCAmQQCAkZGIKDogDKGiZJ6ko2tfynq21WqdWq9XWtq+2Tk9trX3P50RVcLYUsKJSAUFKwQlJIJCQhCFAEsbMIQNJ1//gufecc8+9Z9/kd3D4f/ZaLNfK3fu39/9zf677XXv/938POfbG1+xKNgIECBAgQIAAgTCBIQJWmKVCBAgQIECAAIGagIClEQgQIECAAAECwQICVjCocgQIECBAgAABAUsPECBAgAABAgSCBQSsYFDlCBAgQIAAAQIClh4gQIAAAQIECAQLCFjBoMoRIECAAAECBAQsPUCAAAECBAgQCBYQsIJBlSNAgAABAgQICFh6gAABAgQIECAQLCBgBYMqR4AAAQIECBAQsPQAAQIECBAgQCBYQMAKBlWOAAECBAgQICBg6QECBAgQIECAQLCAgBUMqhwBAgQIECBAQMDSAwQIECBAgACBYAEBKxhUOQIECBAgQICAgKUHCBAgQIAAAQLBAgJWMKhyBAgQIECAAAEBSw8QIECAAAECBIIFBKxgUOUIECBAgAABAgKWHiBAgAABAgQIBAsIWMGgyhEgQIAAAQIEBCw9QIAAAQIECBAIFhCwgkGVI0CAAAECBAgIWHqAAAECBAgQIBAsIGAFgypHgAABAgQIEBCw9AABAgQIECBAIFhAwAoGVY4AAQIECBAgIGDpAQIECBAgQIBAsICAFQyqHAECBAgQIEBAwNIDBAgQIECAAIFgAQErGFQ5AgQIECBAgICApQcIECBAgAABAsECAlYwqHIECBAgQIAAAQFLDxAgQIAAAQIEggUErGBQ5QgQIECAAAECApYeIECAAAECBAgECwhYwaDKESBAgAABAgQELD1AgAABAgQIEAgWELCCQZUjQIAAAQIECAhYeoAAAQIECBAgECwgYAWDKkeAAAECBAgQELD0AAECBAgQIEAgWEDACgZVjgABAgQIECAgYOkBAgQIECBAgECwgIAVDKocAQIECBAgQEDA0gMECBAgQIAAgWABASsYVDkCBAgQIECAgIClBwgQIECAAAECwQICVjCocgQIECBAgAABAUsPECBAgAABAgSCBQSsYFDlCBAgQIAAAQIClh4gQIAAAQIECAQLCFjBoMoRIECAAAECBAQsPUCAAAECBAgQCBYQsIJBlSNAgAABAgQICFh6gAABAgQIECAQLCBgBYMqR4AAAQIECBAQsPQAAQIECBAgQCBYQMAKBlWOAAECBAgQICBg6QECBAgQIECAQLCAgBUMqhwBAgQIECBAQMDSAwQIECBAgACBYAEBKxhUOQIECBAgQICAgKUHCBAgQIAAAQLBAgJWMKhyBAgQIECAAAEBSw8QIECAAAECBIIFBKxgUOUIECBAgAABAgKWHiBAgAABAgQIBAsIWMGgyhEgQIAAAQIEBCw9QIAAAQIECBAIFhCwgkGVI0CAAAECBAgIWHqAAAECBAgQIBAsIGAFgypHgAABAgQIEBCw9AABAgQIECBAIFhAwAoGVY4AAQIECBAgIGDpAQIECBAgQIBAsICAFQyqHAECBAgQIEBAwNIDBAgQIECAAIFgAQErGFQ5AgQIECBAgICApQcIECBAgAABAsECAlYwqHIECBAgQIAAAQFLDxAgQIAAAQIEggUErGBQ5QgQIECAAAECApYeIECAAAECBAgECwhYwaDKESBAgAABAgQELD1AgAABAgQIEAgWELCCQZUjQIAAAQIECAhYeoAAAQIECBAgECwgYAWDKkeAAAECBAgQELD0AAECBAgQIEAgWEDACgZVjgABAgQIECAgYOkBAgQIECBAgECwgIAVDKocAQIECBAgQEDA0gMECBAgQIAAgWABASsYVDkCBAgQIECAgIClBwgQIECAAAECwQICVjCocgQIECBAgAABAUsPECBAgAABAgSCBQSsYFDlCBAgQIAAAQIClh4gQIAAAQIECAQLCFjBoMoRIECAAAECBAQsPUCAAAECBAgQCBYQsIJBlSNAgAABAgQICFh6gAABAgQIECAQLCBgBYMqR4AAAQIECBAQsPQAAQIECBAgQCBYQMAKBlWOAAECBAgQICBg6QECBAgQIECAQLCAgBUMqhwBAgQIECBAQMDSAwQIECBAgACBYAEBKxhUOQIECBAgQICAgKUHCBAgQIAAAQLBAgJWMKhyBAgQIECAAAEBSw8QIECAAAECBIIFBKxgUOUIECBAgAABAgKWHiBAgAABAgQIBAsIWMGgyhEgQIAAAQIEBCw9QIAAAQIECBAIFhCwgkGVI0CAAAECBAgIWHqAAAECBAgQIBAsIGAFgypHgAABAgQIEBCw9AABAgQIECBAIFhAwAoGVY4AAQIECBAgIGDpAQIECBAgQIBAsICAFQyqHAECBAgQIEBAwNIDBAgQIECAAIFgAQErGFQ5AgQIECBAgICApQcIECBAgAABAsECAlYwqHIECBAgQIAAAQFLDxAgQIAAAQIEggUErGBQ5QgQIECAAAECApYeIECAAAECBAgECwhYwaDKESBAgAABAgQELD1AgAABAgQIEAgWELCCQZUjQIAAAQIECAhYeoAAAQIECBAgECwgYAWDKkeAAAECBAgQELD0AAECBAgQIEAgWEDACgZVjgABAgQIECAgYOkBAgQIECBAgECwgIAVDKocAQIECBAgQEDA0gMECBAgQIAAgWABASsYVDkCBAgQIECAgIClBwgQIECAAAECwQICVjCocgQIECBAgAABAUsPECBAgAABAgSCBQSsYFDlCBAgQIAAAQIClh4gQIAAAQIECAQLCFjBoMoRIECAAAECBAQsPUCAAAECBAgQCBYQsIJBlSNAgAABAgQICFh6gAABAgQIECAQLCBgBYMqR4AAAQIECBAQsPQAAQIECBAgQCBYQMAKBlWOAAECBAgQICBg6QECBAgQIECAQLCAgBUMqhwBAgQIECBAQMDSAwQIECBAgACBYAEBKxhUOQIECBAgQICAgKUHCBAgQIAAAQLBAgJWMKhyBAgQIECAAAEBSw8QIECAAAECBIIFBKxgUOUIECBAgAABAgKWHiBAgAABAgQIBAsIWMGgyhEgQIAAAQIEBCw9QIAAAQIECBAIFhCwgkGVI0CAAAECBAgIWHqAAAECBAgQIBAsIGAFgypHgAABAgQIEBCw9AABAgQIECBAIFhAwAoGVY4AAQIECBAgIGDpAQIECBAgQIBAsICAFQyqHAECBAgQIEBAwNIDBAgQIECAAIFgAQErGFQ5AgQIECBAgICApQcIECBAgAABAsECAlYwqHIECBAgQIAAAQFLDxAgQIAAAQIEggUErGBQ5QgQIECAAAECApYeIECAAAECBAgECwhYwaDKESBAgAABAgQELD1A4BkU2PnkjvTkvevT1gc3pO2PbE47N+9Ie40fkcbMnZRGz94nDR25125dzc7N29PWVZtqdXdueSrtNX54GrHfmDRy+vg0dNSw3aqZD9q1fWfatmpj2vrQxrRj3bba9Q2fPDqNPGh8GjZx5G7X/XU/cMOP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');
    }


    public function getThumbImageAttribute()
    {
        return $this->getFirstMediaUrl('images', 'thumb');
    }

    public function getImagesAttribute()
    {
        $imageUrls = [];

        foreach ($this->getMedia('images') as $media) {
            $imageUrls[] = $media->getUrl('slider');
        }

        return $imageUrls;
    }

    public function subItems()
    {
        return $this->hasMany(SubItem::class);
    }

    public function catalogues(): HasManyThrough
    {
        return $this->hasManyThrough(Catalogue::class, SubItem::class, 'item_id', 'id', 'id', 'catalogue_id');
    }
}
